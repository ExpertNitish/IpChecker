<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IP & Location Tracker</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

<style>
/* Background Gradient */
body {
  margin: 0;
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(135deg, #0072ff, #00c6ff);
  color: #333;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  padding: 40px 20px; /* more breathing space */
}

/* Title */
h1 {
  color: #fff;
  font-size: 32px;
  text-align: center;
  margin-bottom: 30px;
  font-weight: 700;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
}

/* Search Box */
.search-box {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 30px;
  width: 100%;
  max-width: 420px;
}

.search-box input[type="text"] {
  flex: 1;
  padding: 12px 16px;
  border: 1px solid #ccc;
  border-radius: 8px 0 0 8px;
  outline: none;
  font-size: 15px;
}

.search-box button {
  padding: 12px 20px;
  border: none;
  background: #0066ff;
  color: #fff;
  border-radius: 0 8px 8px 0;
  cursor: pointer;
  font-size: 15px;
  transition: background 0.3s;
}

.search-box button:hover {
  background: #004ecc;
}

/* Info Table */
.info-box {
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.15);
  padding: 25px 30px;
  width: 100%;
  max-width: 420px;
  margin-bottom: 35px;
}

.info-box table {
  width: 100%;
  border-collapse: collapse;
}

.info-box td {
  padding: 10px 8px;
  border-bottom: 1px solid #eee;
  font-size: 15px;
  color: #333;
}

.info-box td:first-child {
  font-weight: 600;
  color: #555;
}

/* Remove last row border */
.info-box tr:last-child td {
  border-bottom: none;
}

/* Map */
#map {
  height: 420px;
  width: 100%;
  max-width: 900px;
  margin-bottom: 40px;
  border-radius: 15px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.25);
}

/* Footer */
footer {
  color: #fff;
  margin: 15px 0 25px;
  font-weight: 500;
  font-size: 14px;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
}
</style>
</head>
<body>

<h1>IP & Location Tracker</h1>

<!-- Search Box -->
<div class="search-box">
  <input type="text" id="searchIP" placeholder="Enter IP address...">
  <button onclick="lookupIP()">Search</button>
</div>

<!-- Info Table -->
<div class="info-box">
  <table>
    <tr><td>IP Address</td><td id="ip">Loading...</td></tr>
    <tr><td>City</td><td id="city">Loading...</td></tr>
    <tr><td>Region</td><td id="region">Loading...</td></tr>
    <tr><td>Country</td><td id="country">Loading...</td></tr>
    <tr><td>ZIP</td><td id="zip">Loading...</td></tr>
    <tr><td>Latitude</td><td id="lat">Loading...</td></tr>
    <tr><td>Longitude</td><td id="lon">Loading...</td></tr>
    <tr><td>Timezone</td><td id="timezone">Loading...</td></tr>
    <tr><td>Currency</td><td id="currency">Loading...</td></tr>
  </table>
</div>

<!-- Map -->
<div id="map"></div>

<footer>Built with ðŸ’œ Survey Captures</footer>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
const currencySymbols = {
    USD: '$', CAD: 'CA$', AED: 'Ø¯.Ø¥', SAR: 'Ø±.Ø³', INR: 'â‚¹', GBP: 'Â£', EUR: 'â‚¬'
};

function renderData(data) {
    document.getElementById("ip").textContent = data.ip || "N/A";
    document.getElementById("city").textContent = data.city || "N/A";
    document.getElementById("region").textContent = data.region || "N/A";
    document.getElementById("country").textContent = data.country_name || "N/A";
    document.getElementById("zip").textContent = data.postal || "N/A";
    document.getElementById("lat").textContent = data.latitude || "N/A";
    document.getElementById("lon").textContent = data.longitude || "N/A";
    document.getElementById("timezone").textContent = data.timezone || "N/A";
    const symbol = currencySymbols[data.currency] || '';
    document.getElementById("currency").textContent = data.currency ? `${data.currency} ${symbol}` : "N/A";

    // Map
    const map = L.map('map').setView([data.latitude, data.longitude], 10);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
        maxZoom:19, attribution:'&copy; OpenStreetMap contributors'
    }).addTo(map);
    L.marker([data.latitude,data.longitude]).addTo(map)
        .bindPopup(`<b>${data.city || 'Unknown'}, ${data.region || ''}</b><br>${data.country || ''}`)
        .openPopup();
}

// Auto-load user IP
fetch('https://ipapi.co/json/')
    .then(res => res.json())
    .then(data => renderData(data))
    .catch(err => console.error("Error fetching IP info:", err));

// Search by IP
function lookupIP() {
  const ip = document.getElementById("searchIP").value.trim();
  if (!ip) return;
  fetch(`https://ipapi.co/${ip}/json/`)
    .then(res => res.json())
    .then(data => renderData(data))
    .catch(err => console.error("Error fetching IP info:", err));
}
</script>

</body>
</html>
